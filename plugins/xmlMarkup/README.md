Welcome to the Document Markup Plugin
--------------------------------------
Copyright (c) 2003-2013 John Willinsky
Distributed under the GNU GPL v2. For full terms see the file docs/COPYING.

This README file contains a general description of this module's functionality (also available at http://http://pkp.sfu.ca/wiki/index.php/XML_Publishing).  All settings required for its functionality are managed on its plugin settings page (after installation).

This project implements an OJS plugin for producing NLM standard article XML, as well as pdf and HTML document versions for any article uploaded to an OJS journal.

This plugin has a few settings fields. One field enables selecting a CSL style (that pertains to the OJS journal) from a dynamic list. This controls the format of citations and bibliography entries. Another setting controls whether a pdf version of the article intended only for reviewers is produced. As well, an upload field is provided to send a header image for inclusion in pdf and html versions. Finally, using the OJS file manager, Journal Managers can change the styling of displayed html documents.

When an author, copyeditor or editor uploads a new version (odt, docx, doc, or pdf format) of an article, this module (using a separate thread) submits it to the pdfx server specified in the configuration file. The following files are returned in a gzip'ed archive file (X-Y-Z-AG.tar.gz) which is added (or replaces a pre-existing version in) the Supplementary files section.

 	manifest.xml
 	document.pdf (used for parsing; generated if input is not PDF)
	document-review.pdf (included for reviewers only, it has 1st page author information stripped out)
 	document-new.pdf (layout version of PDF)
	document.nlm.xml (NLM-XML3/JATS-compliant)
	document.html (web-viewable article version)
	document.bib (JSON-like format for structured citations)
	document.refs (a text file of the article's citations and their bibliographic references, formatted according to selected CSL style. Also indicates when references were unused in body of article.)

If the article is being uploaded as a galley publish, this plugin will extract the xml, html and pdf versions when they are ready, and will place them in the supplementary file folder so that web options can be provided for viewing.
This process is triggered each time an article is submitted to enable the bibliographic reference work to be available at early stages of review and during copyedit.

OJS User Experience

While in the Editing tab of an article submission, a journal editor or section editor can directly access the HTML, PDF, and XML files generated by the Document Markup Plugin. These are contained in a zipfile titled "Document Markup Files" found in the "Layout" section "Supplementary Files" list. To provide a reviewer/proofreader/etc. with the converted document.pdf or document-review.pdf (the latter of which has authorship details stripped out for blind peer review), you should extract this file from this zip archive.

In advance of publishing, it is possible to provide reviewers/proofreaders/etc. with direct links to files, provided that galley versions have been established. To create the galley links, just use the "Upload file to Layout Version" option at the bottom of the Layout section; this will automatically create links to HTML, PDF, and XML versions. These will be accessible to all users with the appropriate permissions, and can be selectively deleted.

When an article is published, the galley links shown in the article's layout area will effectively go live. If you delete any of these links, the corresponding file(s) will be deleted. In this way you can selectively prevent the HTML, PDF, or XML version of an article from being publicly available. This never affects the source files originally uploaded by the author.